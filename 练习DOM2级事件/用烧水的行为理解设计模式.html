<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
<script>

    function bolling(){
        console.log('水开了');
        fire()
    }
    function waterFace(){
        console.log('洗脸')
    }
    function drink(){
        console.log('喝水')
    }

    //给水壶安装报警器
    var oEvent = {};
    function on(fn){
        var type = 'selfboiling';
        if(!oEvent[type]){
            oEvent[type] = [];
        }
        var a = oEvent[type];
        for(var i=0;i< a.length;i++){
            if(a[i] == fn) return;
        }
        a.push(fn);
    }
    function fire(){
         var a = oEvent['selfboiling'];
         for(var i=0;i< a.length;i++){
             a[i]();
         }
    }
    on(waterFace);
    on(waterFace);
    on(drink);

    bolling();

</script>
</body>
</html>